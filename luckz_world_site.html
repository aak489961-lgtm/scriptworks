<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ScriptWork</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-blue: #007bff;
      --dark-blue: #0056b3;
      --light-gray: #f8f9fa;
      --dark-gray: #343a40;
      --black-opac: rgba(0, 0, 0, 0.9);
    }

    body {
      background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://imgur.com/gallery/VZn9Qxa') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Poppins', sans-serif;
      color: white;
      overflow-x: hidden;
      scroll-behavior: smooth;
    }

    .overlay {
      background: rgba(0, 0, 0, 0.7);
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 0;
    }

    /* Cards de Produtos e Livros */
    .card, .book-card {
      background: var(--black-opac);
      border-radius: 0.75rem;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease-in-out;
      animation: fadeInUp 0.8s ease-out forwards;
      opacity: 0;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .card:hover, .book-card:hover {
      transform: translateY(-5px) scale(1.01);
      box-shadow: 0 12px 35px rgba(0, 150, 255, 0.5);
      border-color: var(--primary-blue);
    }
    .book-card img {
      border-radius: 0.75rem 0.75rem 0 0;
      height: 200px;
      object-fit: cover;
    }
    .book-card-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 50%, rgba(0,0,0,0) 100%);
      padding: 0.75rem;
      border-radius: 0 0 0.75rem 0.75rem;
    }

    /* Top Menu */
    .top-menu {
      background: var(--black-opac);
      backdrop-filter: blur(8px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    }
    .top-menu a {
      font-weight: 600;
      padding: 0.5rem 0.75rem;
      border-radius: 0.5rem;
      transition: all 0.3s ease;
      font-size: 1rem;
    }
    .top-menu a:hover {
      color: var(--primary-blue);
      background-color: rgba(255, 255, 255, 0.1);
    }
    .active-users {
      background-color: rgba(40, 167, 69, 0.2);
      color: #28a745;
      padding: 0.25rem 0.75rem;
      border-radius: 0.5rem;
      font-size: 0.875rem;
      font-weight: 600;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }

    /* Modais */
    .modal {
      display: none;
      position: fixed;
      z-index: 150;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease-out;
    }
    .modal-content {
      background: #1a1a1a;
      border-radius: 1.5rem;
      padding: 2rem;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
      color: var(--light-gray);
      border: 1px solid rgba(255, 255, 255, 0.1);
      animation: slideIn 0.4s ease-out;
      max-width: 90%;
    }
    .modal-content input {
      background: #2a2a2a;
      border: 1px solid #444;
      color: var(--light-gray);
      border-radius: 0.75rem;
    }

    /* Botões Padrão */
    .btn-primary {
      background: var(--primary-blue);
      color: white;
      font-weight: 700;
      padding: 0.6rem 1.2rem;
      border-radius: 0.6rem;
      transition: all 0.3s ease-in-out;
      box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);
    }
    .btn-primary:hover {
      background: var(--dark-blue);
      transform: translateY(-2px) scale(1.01);
      box-shadow: 0 6px 18px rgba(0, 123, 255, 0.5);
    }

    /* Botões da Hero Section */
    .hero-btn {
      @apply btn-primary;
      font-size: 1.125rem;
      padding: 0.8rem 2rem;
      margin: 0 0.5rem;
      min-width: 150px;
    }
    .hero-btn.register {
      background: #28a745;
      box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
    }
    .hero-btn.register:hover {
      background: #218838;
      box-shadow: 0 6px 18px rgba(40, 167, 69, 0.5);
    }

    /* Tela de Carregamento */
    .loading-screen {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: var(--black-opac);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 200;
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
    }
    .loading-spinner {
        border: 4px solid rgba(255, 255, 255, 0.2);
        border-top: 4px solid var(--primary-blue);
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    /* Animações e Estilos */
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .typing-text {
      overflow: hidden;
      border-right: .15em solid var(--primary-blue);
      white-space: nowrap;
      margin: 0 auto;
      letter-spacing: .1em;
      animation: typing 2s steps(20, end) forwards, blink-caret .75s step-end infinite;
    }
    @keyframes typing { from { width: 0 } to { width: 100% } }
    @keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: var(--primary-blue); } }
    .fade-in-title { opacity: 0; animation: fadeInAnim 1s ease-out 2s forwards; }
    @keyframes fadeInAnim { from { opacity: 0; } to { opacity: 1; } }
    
    .book-reader-modal .modal-content {
      max-width: 800px;
    }

    .book-page {
      display: none;
    }
    .book-page.active {
      display: block;
    }

    .session {
        display: none;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }
    .session.active {
        display: block;
        opacity: 1;
    }
  </style>
</head>
<body class="relative text-white min-h-screen">
  <div class="overlay"></div>

  <div class="top-menu py-4 px-4 md:px-8 flex flex-col md:flex-row justify-between items-center fixed top-0 left-0 w-full z-50">
    <div class="mb-2 md:mb-0">
      <ul class="flex space-x-4 md:space-x-8">
        <li><a href="#" onclick="showSection('produtos-section')" class="text-sm md:text-xl font-semibold text-white hover:text-blue-400 transition">PRODUTOS</a></li>
        <li><a href="#" onclick="handleLibraryClick()" class="text-sm md:text-xl font-semibold text-white hover:text-blue-400 transition">BIBLIOTECA</a></li>
        <li><a href="#" onclick="showSection('sobre-section')" class="text-sm md:text-xl font-semibold text-white hover:text-blue-400 transition">SOBRE NÓS</a></li>
      </ul>
    </div>
    <div id="activeUsersCounter" class="hidden">
      <span class="active-users"></span>
    </div>
  </div>

  <div id="loading-screen" class="loading-screen">
    <div class="loading-spinner"></div>
  </div>

  <main class="relative z-10 pt-20">

    <section id="hero-section" class="session active flex flex-col items-center justify-center text-center min-h-screen px-4 py-20">
      <h1 class="text-5xl md:text-6xl font-extrabold mb-4 md:mb-6 drop-shadow-xl text-white leading-tight">
          <span class="typing-text block mx-auto w-fit">Bem-vindo à</span>
          <span class="text-blue-500 fade-in-title block mt-2 md:mt-4 text-6xl md:text-8xl">ScriptWork</span>
      </h1>
      <p class="text-lg md:text-xl text-gray-200 max-w-2xl leading-relaxed mb-8 md:mb-12 animate-fadeInUp" style="animation-delay: 2.5s;">
        Seu portal para GameModes, modificações e texturas de alta qualidade.
        Transforme sua experiência de jogo com nossos produtos e serviços.
      </p>
      <div class="flex flex-wrap justify-center gap-4 md:gap-6 animate-fadeInUp" style="animation-delay: 3s;">
        <button onclick="openModal('registerModal')" class="hero-btn register">Registrar</button>
        <button onclick="openModal('loginModal')" class="hero-btn">Login</button>
      </div>
    </section>

    <section id="produtos-section" class="session px-4 md:px-8 py-10 md:py-20 bg-gradient-to-b from-black to-gray-900 bg-opacity-90">
      <h3 class="text-3xl md:text-4xl font-bold text-blue-500 text-center mb-10 md:mb-14">Nossos Produtos</h3>
      <div class="grid md:grid-cols-4 gap-6 md:gap-10 max-w-6xl mx-auto">
        <div class="card p-4 md:p-6 text-center animate-fadeInUp" style="animation-delay: 0.1s;">
          <h4 class="text-xl md:text-2xl font-semibold mb-2 text-blue-300">GameMode</h4>
          <p class="text-gray-300 mb-3 text-sm">Sistemas completos e otimizados para servidores SA-MP.</p>
          <button onclick="handleBuyClick()" class="btn-primary mt-2">Comprar</button>
        </div>
        <div class="card p-4 md:p-6 text-center animate-fadeInUp" style="animation-delay: 0.2s;">
          <h4 class="text-xl md:text-2xl font-semibold mb-2 text-blue-300">Modificação de GM</h4>
          <p class="text-gray-300 mb-3 text-sm">Customizações sob medida para sua GameMode.</p>
          <button onclick="handleBuyClick()" class="btn-primary mt-2">Comprar</button>
        </div>
        <div class="card p-4 md:p-6 text-center animate-fadeInUp" style="animation-delay: 0.3s;">
          <h4 class="text-xl md:text-2xl font-semibold mb-2 text-blue-300">Texture Studio</h4>
          <p class="text-gray-300 mb-3 text-sm">Criação de texturas profissionais para seu projeto.</p>
          <button onclick="handleBuyClick()" class="btn-primary mt-2">Comprar</button>
        </div>
        <div class="card p-4 md:p-6 text-center animate-fadeInUp" style="animation-delay: 0.4s;">
          <h4 class="text-xl md:text-2xl font-semibold mb-2 text-blue-300">Crie sua Rádio</h4>
          <p class="text-gray-300 mb-3 text-sm">Desenvolvemos sua própria rádio online exclusiva.</p>
          <button onclick="handleBuyClick()" class="btn-primary mt-2">Comprar</button>
        </div>
      </div>
    </section>

    <section id="library-section" class="session px-4 md:px-8 py-10 md:py-20 bg-gradient-to-b from-gray-900 to-black bg-opacity-90">
        <div id="library-content" class="max-w-7xl mx-auto">
            <h3 class="text-3xl md:text-4xl font-bold text-blue-500 text-center mb-10 md:mb-14">Biblioteca Code</h3>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6">
              <div class="book-card animate-fadeInUp cursor-pointer" style="animation-delay: 0.1s;" onclick="openBook('pawno')">
                <img src="https://via.placeholder.com/250x350.png?text=Pawno+do+Zero" alt="Livro Pawno do Zero">
                <div class="book-card-overlay">
                  <h4 class="text-lg md:text-xl font-semibold text-white">Pawno do Zero</h4>
                  <p class="text-xs md:text-sm text-gray-400">Guia para iniciantes em programação SA-MP.</p>
                </div>
              </div>
              <div class="book-card animate-fadeInUp cursor-pointer" style="animation-delay: 0.2s;" onclick="openBook('html')">
                <img src="https://via.placeholder.com/250x350.png?text=HTML+Simplificado" alt="Livro HTML Simplificado">
                <div class="book-card-overlay">
                  <h4 class="text-lg md:text-xl font-semibold text-white">HTML Simplificado</h4>
                  <p class="text-xs md:text-sm text-gray-400">Aprenda a criar sites com este guia.</p>
                </div>
              </div>
            </div>
        </div>
        <div id="library-maintenance" class="text-center p-6 md:p-10 bg-gray-800 rounded-lg max-w-xl mx-auto border border-gray-700 shadow-xl">
            <p class="text-xl md:text-3xl text-red-400 font-bold mb-3 md:mb-4">Biblioteca Code em Manutenção</p>
            <p class="text-sm md:text-lg text-gray-300">Esta seção está sendo atualizada com novos títulos e conteúdos. Por favor, insira o código de acesso para entrar.</p>
        </div>
    </section>

    <section id="sobre-section" class="session px-4 md:px-8 py-10 md:py-20 bg-gradient-to-b from-black to-gray-900 bg-opacity-90">
      <h3 class="text-3xl md:text-4xl font-bold text-blue-500 text-center mb-8 md:mb-10">Sobre Nós</h3>
      <p class="max-w-3xl mx-auto text-center text-gray-200 text-sm md:text-lg leading-relaxed">
        A <span class="text-blue-500 font-semibold">ScriptWork</span> nasceu da paixão pelo universo GTA San Andreas. Nosso foco é trazer soluções criativas e profissionais para servidores SA-MP, com GameModes, modificações exclusivas e texturas de alta qualidade. Trabalhamos com dedicação para elevar a experiência dos jogadores.
        e atendemos clientes em todo o Brasil, buscando sempre inovação e a satisfação dos nossos clientes.
      </p>
    </section>

  </main>

  <footer class="relative z-10 py-4 bg-black bg-opacity-90 text-center text-gray-400 text-xs md:text-sm">
    © 2025 ScriptWork - Todos os direitos reservados.
  </footer>
  
  <div id="pixModal" class="modal">
    <div class="modal-content">
      <span onclick="closeModal('pixModal')" class="absolute top-4 right-6 text-gray-500 hover:text-white text-2xl cursor-pointer">&times;</span>
      <h1 class="text-2xl md:text-3xl font-bold text-blue-400 mb-4 md:mb-6">Pagamento via Pix</h1>
      <p class="text-gray-400 mb-4 md:mb-6 text-sm">Escaneie o QR Code ou copie a chave Pix para finalizar sua compra:</p>
      <img src="https://i.postimg.cc/LsKnqxGC/Screenshot-20250828-195137.jpg" alt="QR Code Pix" class="rounded-xl w-48 md:w-60 h-48 md:h-60 mx-auto mb-6 border border-gray-700">
      <div class="bg-gray-800 p-3 rounded-xl mb-4 md:mb-6">
        <p class="text-xs text-gray-500 mb-1">Chave Pix:</p>
        <p id="pix-key" class="break-all text-blue-300 font-semibold text-sm">
          00020126580014br.gov.bcb.pix013625a5d177-1212-44c8-bc65-b2f0ca93c6a5520400005303986540539.905802BR5925LUCAS GABRIEL DE CASTILHO6012RIO NEGRINHO62290525JFXXEJK32AAE618VXTZG36GXD6304961A
        </p>
      </div>
      <button onclick="copyPix()" class="btn-primary w-full">Copiar Chave Pix</button>
    </div>
  </div>

  <div id="registerModal" class="modal">
    <div class="modal-content">
      <span onclick="closeModal('registerModal')" class="absolute top-4 right-6 text-gray-500 hover:text-white text-2xl cursor-pointer">&times;</span>
      <h1 class="text-2xl md:text-3xl font-bold text-blue-400 mb-4 md:mb-6">Criar Conta</h1>
      <form onsubmit="event.preventDefault(); registerUser();">
        <input type="text" id="registerName" placeholder="Nome de usuário" class="w-full p-2 md:p-3 mb-3 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
        <input type="email" id="registerEmail" placeholder="Email" class="w-full p-2 md:p-3 mb-3 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
        <input type="password" id="registerPassword" placeholder="Senha" class="w-full p-2 md:p-3 mb-4 md:mb-6 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
        <button type="submit" class="btn-primary w-full mt-2">Registrar</button>
        <p class="text-gray-500 text-xs md:text-sm mt-3 text-center">Já tem uma conta? <a href="#" onclick="openModal('loginModal')" class="text-blue-400 hover:underline">Faça login</a></p>
      </form>
    </div>
  </div>

  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span onclick="closeModal('loginModal')" class="absolute top-4 right-6 text-gray-500 hover:text-white text-2xl cursor-pointer">&times;</span>
      <h1 class="text-2xl md:text-3xl font-bold text-blue-400 mb-4 md:mb-6">Login</h1>
      <form onsubmit="event.preventDefault(); loginUser();">
        <input type="email" id="loginEmail" placeholder="Email" class="w-full p-2 md:p-3 mb-3 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
        <input type="password" id="loginPassword" placeholder="Senha" class="w-full p-2 md:p-3 mb-4 md:mb-6 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
        <button type="submit" class="btn-primary w-full mt-2">Entrar</button>
        <p class="text-gray-500 text-xs md:text-sm mt-3 text-center">Não tem uma conta? <a href="#" onclick="openModal('registerModal')" class="text-blue-400 hover:underline">Registre-se</a></p>
      </form>
    </div>
  </div>

  <div id="libraryAccessModal" class="modal">
    <div class="modal-content">
      <span onclick="closeModal('libraryAccessModal')" class="absolute top-4 right-6 text-gray-500 hover:text-white text-2xl cursor-pointer">&times;</span>
      <h1 class="text-xl md:text-3xl font-bold text-blue-400 mb-4">Acesso à Biblioteca Code</h1>
      <p class="text-gray-400 mb-4 text-sm">
        A Biblioteca está em constante atualização com novos títulos e materiais. Para ter acesso, por favor, insira o código:
      </p>
      <input type="password" id="libraryCodeInput" placeholder="Digite o código" class="w-full p-2 md:p-3 mb-4 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
      <button onclick="checkLibraryCode()" class="btn-primary w-full">Entrar</button>
    </div>
  </div>

  <div id="bookReaderModal" class="modal book-reader-modal">
    <div class="modal-content">
      <span onclick="closeModal('bookReaderModal')" class="absolute top-4 right-6 text-gray-500 hover:text-white text-2xl cursor-pointer">&times;</span>
      <h1 id="book-title" class="text-2xl md:text-4xl font-bold text-blue-400 mb-4 text-center"></h1>
      <div id="book-content" class="text-gray-300 text-sm md:text-base leading-relaxed overflow-y-auto max-h-[60vh]">
        </div>
      <div class="flex justify-between items-center mt-6">
        <button onclick="prevPage()" class="btn-primary">Página Anterior</button>
        <span id="page-counter" class="text-sm text-gray-500"></span>
        <button onclick="nextPage()" class="btn-primary">Próxima Página</button>
      </div>
    </div>
  </div>

  <script>
    let userData = JSON.parse(localStorage.getItem('userData')) || null;
    let libraryUnlocked = sessionStorage.getItem('libraryUnlocked') === 'true';

    const allModals = document.querySelectorAll('.modal');
    const sections = document.querySelectorAll('.session');
    const loadingScreen = document.getElementById('loading-screen');
    const libraryContent = document.getElementById('library-content');
    const libraryMaintenance = document.getElementById('library-maintenance');
    const activeUsersCounter = document.getElementById('activeUsersCounter');
    let activeUsersInterval = null;

    const bookData = {
      pawno: {
        title: 'Pawno do Zero',
        pages: [
          'Seja bem-vindo ao nosso guia para iniciar sua jornada no PAWNO! PAWNO é uma linguagem de programação usada para criar modos de jogo para servidores de GTA San Andreas.',
          'Nesta primeira página, vamos te ensinar como configurar seu ambiente de desenvolvimento. Você vai precisar do SA-MP Server e do editor de código PAWNO. Lembre-se, a prática leva à perfeição!',
          'A segunda página do livro fala sobre as variáveis e tipos de dados em PAWNO. É a base para a criação de sistemas e funcionalidades. Continue aprendendo!',
          'Na terceira página, exploramos as estruturas de controle como "if-else" e "for". Elas são essenciais para criar lógicas complexas nos seus GameModes.'
        ]
      },
      html: {
        title: 'HTML Simplificado',
        pages: [
          'Olá, futuro desenvolvedor web! Este livro foi feito para você, que quer aprender HTML de uma forma simples e direta. HTML é a linguagem de marcação que estrutura as páginas da internet.',
          'Nesta página, vamos mergulhar nos conceitos básicos de tags e elementos. Você vai entender a diferença entre <p>, <h1>, e <div>, e como eles funcionam.',
          'A próxima página aborda os atributos e links. Aprenda a usar atributos como `href` e `src` para dar mais funcionalidades aos seus elementos HTML.',
          'A última página foca em formulários e inputs. Você vai aprender a criar formulários de registro e login, essenciais para qualquer site interativo.'
        ]
      }
    };

    let currentBookId = '';
    let currentPage = 0;

    function showSection(sectionId) {
        const currentActive = document.querySelector('.session.active');
        const nextSection = document.getElementById(sectionId);

        if (currentActive === nextSection) {
            window.scrollTo({ top: 0, behavior: 'smooth' });
            return;
        }

        if (currentActive) {
            currentActive.classList.remove('active');
        }

        loadingScreen.style.display = 'flex';
        setTimeout(() => {
            loadingScreen.style.opacity = '1';
        }, 10);

        setTimeout(() => {
            loadingScreen.style.opacity = '0';
            setTimeout(() => {
                loadingScreen.style.display = 'none';
                if (nextSection) {
                    nextSection.classList.add('active');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }, 300);
        }, 800);
    }
    
    function openModal(modalId) {
      allModals.forEach(modal => modal.style.display = 'none');
      document.getElementById(modalId).style.display = 'flex';
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    function handleBuyClick() {
      if (userData) {
        openModal('pixModal');
      } else {
        openModal('loginModal');
      }
    }

    function registerUser() {
      const name = document.getElementById('registerName').value;
      const email = document.getElementById('registerEmail').value;
      const password = document.getElementById('registerPassword').value;

      const storedUser = JSON.parse(localStorage.getItem('userData'));
      if (storedUser && storedUser.email === email) {
        alert('Este email já está em uso. Por favor, use outro.');
        return;
      }

      if (name && email && password) {
        userData = { name, email, password };
        localStorage.setItem('userData', JSON.stringify(userData));
        alert('Registro bem-sucedido! Agora você pode fazer login.');
        closeModal('registerModal');
      } else {
        alert('Por favor, preencha todos os campos.');
      }
    }

    function updateActiveUsers() {
      const minUsers = 8;
      const maxUsers = 21;
      const activeUsers = Math.floor(Math.random() * (maxUsers - minUsers + 1)) + minUsers;
      const activeUsersText = `${activeUsers} Usuários Ativos`;
      document.querySelector('#activeUsersCounter span').innerText = activeUsersText;
      activeUsersCounter.style.display = 'block';
    }

    function loginUser() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;

      const storedUser = JSON.parse(localStorage.getItem('userData'));

      if (storedUser && storedUser.email === email && storedUser.password === password) {
        userData = storedUser;
        alert('Login bem-sucedido!');
        closeModal('loginModal');
        updateActiveUsers();
        if (activeUsersInterval) clearInterval(activeUsersInterval);
        activeUsersInterval = setInterval(updateActiveUsers, 5000);
      } else {
        alert('Email ou senha incorretos. Tente novamente ou registre-se.');
      }
    }

    function handleLibraryClick() {
      if (libraryUnlocked) {
        showSection('library-section');
      } else {
        openModal('libraryAccessModal');
      }
    }

    function checkLibraryCode() {
      const code = document.getElementById('libraryCodeInput').value;
      const correctCode = '3332';

      if (code === correctCode) {
        alert('Código correto! Acesso liberado.');
        libraryUnlocked = true;
        sessionStorage.setItem('libraryUnlocked', 'true');
        closeModal('libraryAccessModal');
        updateLibraryDisplay();
        showSection('library-section');
      } else {
        alert('Código incorreto. Tente novamente.');
      }
    }

    function updateLibraryDisplay() {
        if (libraryUnlocked) {
            libraryContent.style.display = 'block';
            libraryMaintenance.style.display = 'none';
        } else {
            libraryContent.style.display = 'none';
            libraryMaintenance.style.display = 'block';
        }
    }

    function openBook(bookId) {
      currentBookId = bookId;
      currentPage = 0;
      updateBookContent();
      openModal('bookReaderModal');
    }

    function updateBookContent() {
      const book = bookData[currentBookId];
      const contentDiv = document.getElementById('book-content');
      const pageCounterSpan = document.getElementById('page-counter');
      const titleElement = document.getElementById('book-title');

      titleElement.innerText = book.title;
      contentDiv.innerHTML = `<p>${book.pages[currentPage]}</p>`;
      pageCounterSpan.innerText = `Página ${currentPage + 1} de ${book.pages.length}`;
    }

    function nextPage() {
      const book = bookData[currentBookId];
      if (currentPage < book.pages.length - 1) {
        currentPage++;
        updateBookContent();
      } else {
        alert('Fim do livro!');
      }
    }

    function prevPage() {
      if (currentPage > 0) {
        currentPage--;
        updateBookContent();
      } else {
        alert('Você já está na primeira página.');
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
        updateLibraryDisplay();
        document.getElementById('hero-section').classList.add('active');
        if (userData) {
          updateActiveUsers();
          activeUsersInterval = setInterval(updateActiveUsers, 5000);
        }
    });
  </script>
</body>
</html>